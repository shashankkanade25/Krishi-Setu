<!-- Custom Alert/Confirm Modal HTML -->
<div id="customModal" class="custom-modal">
    <div class="custom-modal-content">
        <div id="customModalIcon" class="custom-modal-icon"></div>
        <p id="customModalMessage" class="custom-modal-message"></p>
        <div id="customModalActions">
            <button id="customModalOkBtn" class="custom-modal-btn">OK</button>
            <button id="customModalCancelBtn" class="custom-modal-btn cancel">Cancel</button>
        </div>
    </div>
</div>

<style>
.custom-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    z-index: 9999;
    animation: fadeIn 0.2s ease;
}

.custom-modal.show {
    display: flex;
    align-items: center;
    justify-content: center;
}

.custom-modal-content {
    background: white;
    padding: 32px;
    border-radius: 16px;
    max-width: 450px;
    width: 90%;
    text-align: center;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: slideUp 0.3s ease;
    position: relative;
}

.custom-modal-icon {
    width: 64px;
    height: 64px;
    margin: 0 auto 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    font-size: 32px;
}

.custom-modal-icon.success {
    background: linear-gradient(135deg, #4CAF50, #45a049);
    color: white;
}

.custom-modal-icon.error {
    background: linear-gradient(135deg, #f44336, #d32f2f);
    color: white;
}

.custom-modal-icon.warning {
    background: linear-gradient(135deg, #ff9800, #f57c00);
    color: white;
}

.custom-modal-icon.info {
    background: linear-gradient(135deg, #2196F3, #1976D2);
    color: white;
}

.custom-modal-message {
    font-size: 16px;
    color: #333;
    line-height: 1.6;
    margin-bottom: 24px;
    font-weight: 500;
}

#customModalActions {
    display: flex;
    gap: 12px;
    justify-content: center;
}

.custom-modal-btn {
    padding: 12px 32px;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 100px;
}

.custom-modal-btn:not(.cancel) {
    background: linear-gradient(135deg, #4CAF50, #45a049);
    color: white;
}

.custom-modal-btn:not(.cancel):hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
}

.custom-modal-btn.cancel {
    background: #f5f5f5;
    color: #666;
}

.custom-modal-btn.cancel:hover {
    background: #e0e0e0;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</style>

<script>
// Custom Modal Function (alert/confirm style)
function showModal(message, options = {}) {
    const modal = document.getElementById('customModal');
    const modalMessage = document.getElementById('customModalMessage');
    const modalIcon = document.getElementById('customModalIcon');
    const okBtn = document.getElementById('customModalOkBtn');
    const cancelBtn = document.getElementById('customModalCancelBtn');

    if (!modal || !modalMessage || !okBtn || !cancelBtn) {
        alert(message); // fallback
        if (options.onOk) options.onOk();
        return;
    }

    // Set message
    modalMessage.textContent = message;
    
    // Set icon type (success, error, warning, info)
    const type = options.type || 'success';
    modalIcon.className = 'custom-modal-icon ' + type;
    
    // Set icon content
    const icons = {
        success: '✓',
        error: '✕',
        warning: '⚠',
        info: 'ℹ'
    };
    modalIcon.textContent = icons[type] || icons.success;
    
    modal.classList.add('show');

    // Show/hide Cancel button
    if (options.showCancel) {
        cancelBtn.style.display = 'inline-block';
    } else {
        cancelBtn.style.display = 'none';
    }

    // Remove previous listeners
    okBtn.onclick = null;
    cancelBtn.onclick = null;

    okBtn.onclick = () => {
        modal.classList.remove('show');
        if (options.onOk) options.onOk();
    };
    
    cancelBtn.onclick = () => {
        modal.classList.remove('show');
        if (options.onCancel) options.onCancel();
    };

    // Close on outside click
    modal.onclick = (e) => {
        if (e.target === modal) {
            modal.classList.remove('show');
            if (options.showCancel && options.onCancel) options.onCancel();
        }
    };
}

// Override default alert with custom modal
window.customAlert = function(message, type = 'info') {
    showModal(message, { type: type });
};

// Confirm dialog
window.customConfirm = function(message, onConfirm, onCancel) {
    showModal(message, {
        type: 'warning',
        showCancel: true,
        onOk: onConfirm,
        onCancel: onCancel
    });
};
</script>
